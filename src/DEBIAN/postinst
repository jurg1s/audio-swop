#!/bin/bash
set -e

# This script runs after the package is installed.

# Function to check if a package is installed
is_installed() {
    dpkg -l "$1" &> /dev/null
}

# Install required dependencies if not already installed
if ! is_installed python3-pyqt5; then
    echo "Installing python3-pyqt5..."
    sudo apt-get update
    sudo apt-get install -y python3-pyqt5
fi

if ! is_installed ffmpeg; then
    echo "Installing ffmpeg..."
    sudo apt-get update
    sudo apt-get install -y ffmpeg
fi

# Make sure to check if the script exists before executing it.
if [ -f /usr/share/audio-swop/setup.sh ]; then
    /usr/share/audio-swop/setup.sh
else
    echo "Warning: setup.sh not found, skipping."
fi

exit 0